import{H as d,N as y,S as l,Z as b,a as f,b as v,ea as a,nb as m,ob as g}from"./chunk-2ROVDL6K.js";function p(o,e){let r=!e?.manualCleanup;r&&!e?.injector&&l(p);let c=r?e?.injector?.get(b)??y(b):null,u=h(e?.equal),n;e?.requireSync?n=a({kind:0},{equal:u}):n=a({kind:1,value:e?.initialValue},{equal:u});let i=o.subscribe({next:t=>n.set({kind:1,value:t}),error:t=>{if(e?.rejectErrors)throw t;n.set({kind:2,error:t})}});if(e?.requireSync&&n().kind===0)throw new d(601,!1);return c?.onDestroy(i.unsubscribe.bind(i)),m(()=>{let t=n();switch(t.kind){case 1:return t.value;case 2:throw t.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function h(o=Object.is){return(e,r)=>e.kind===1&&r.kind===1&&o(e.value,r.value)}function w(o){return o?.injector||l(w),g(v(f({},o),{loader:void 0,stream:e=>{let r,c=()=>r.unsubscribe();e.abortSignal.addEventListener("abort",c);let u=a({value:void 0}),n,i=new Promise(s=>n=s);function t(s){u.set(s),n?.(u),n=void 0}return r=o.loader(e).subscribe({next:s=>t({value:s}),error:s=>t({error:s}),complete:()=>{n&&t({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",c)}}),i}}))}export{p as a,w as b};
